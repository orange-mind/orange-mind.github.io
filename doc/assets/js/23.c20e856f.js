(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{345:function(t,e,a){"use strict";a.r(e);var i=a(25),n=Object(i.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"页面脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#页面脚本"}},[t._v("#")]),t._v(" 页面脚本")]),t._v(" "),e("blockquote",[e("p",[t._v("由于V3版本的Chrome扩展不支持动态执行脚本，该功能需要搭配OrangeMindHelper使用，请先安装"),e("RouterLink",{attrs:{to:"/helper.html"}},[t._v("OrangeMindHelper")]),t._v("扩展")],1)]),t._v(" "),e("p",[t._v("页面脚本是OrangeMind定制网页的刻刀，借助页面脚本我们可以去除广告、移除水印，聚合展示页面数据，增强页面功能等等。总之，只要能通过JS实现的功能，它都可以做到。")]),t._v(" "),e("p",[t._v("页面脚本配置面板如下所示：")]),t._v(" "),e("img",{staticClass:"img full-img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code.png"}}),t._v(" "),e("img",{staticClass:"img full-img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-1.png"}}),t._v(" "),e("h2",{attrs:{id:"配置属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置属性"}},[t._v("#")]),t._v(" 配置属性")]),t._v(" "),e("p",[t._v("单个页面脚本支持配置以下属性：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("key")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("name")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("页面脚本名称")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("version")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("版本号")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("description")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("页面脚本描述或说明")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("author")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("作者")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("match")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("Array<String>")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("页面脚本在哪些页面生效，可以配置多个url，url支持*通配符")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("icon")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("页面脚本icon")])])])]),t._v(" "),e("p",[t._v("除config面板外，其他几个配置面板分别是html、js、css、vue，这意味着可以同时注入html结构、js代码、css样式和vue代码（未安装OrangeMindHelper扩展时仅支持注入css）。")]),t._v(" "),e("h2",{attrs:{id:"执行效果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行效果"}},[t._v("#")]),t._v(" 执行效果")]),t._v(" "),e("h3",{attrs:{id:"html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html"}},[t._v("#")]),t._v(" html")]),t._v(" "),e("p",[t._v("注入html如下所示：")]),t._v(" "),e("img",{staticClass:"img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-html.png"}}),t._v(" "),e("p",[t._v("效果如下所示：")]),t._v(" "),e("img",{staticClass:"img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-html-1.png"}}),t._v(" "),e("h3",{attrs:{id:"js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js"}},[t._v("#")]),t._v(" js")]),t._v(" "),e("p",[t._v("注入js过程及效果如下所示：")]),t._v(" "),e("img",{staticClass:"img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-js.gif"}}),t._v(" "),e("h3",{attrs:{id:"css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[t._v("#")]),t._v(" css")]),t._v(" "),e("p",[t._v("注入css如下所示：")]),t._v(" "),e("img",{staticClass:"img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-css.png"}}),t._v(" "),e("p",[t._v("效果如下所示：")]),t._v(" "),e("img",{staticClass:"img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-css-1.png"}}),t._v(" "),e("h3",{attrs:{id:"vue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue"}},[t._v("#")]),t._v(" vue")]),t._v(" "),e("p",[t._v("除了基础的html、js、css代码外，为了快速注入功能模块，OrangeMind还特别支持了vue代码注入，如下所示：")]),t._v(" "),e("img",{staticClass:"img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-vue.gif"}}),t._v(" "),e("p",[t._v("如上所示，vue面板中键入 "),e("code",[t._v("template-vue")]),t._v(" 可以快速创建vue模版。")]),t._v(" "),e("h2",{attrs:{id:"api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),e("p",[t._v("为了更加方便的编写页面脚本，OrangeMind内置了"),e("code",[t._v("runtimeId")]),t._v("、"),e("code",[t._v("actionId")]),t._v("和"),e("code",[t._v("orangeMind")]),t._v("对象，点击js面板右上角的第二个按钮（"),e("code",[t._v("问号？")]),t._v("按钮），可以查看帮助文档：")]),t._v(" "),e("img",{staticClass:"img",attrs:{src:"https://orange-mind.github.io/res/images/docs/code-js-1.png"}}),t._v(" "),e("p",[e("code",[t._v("orangeMind")]),t._v("对象支持以下方法：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("#")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("方法名")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("ready")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("callback")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("页面ready后执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("request")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("{ url, method, data, headers, onload, onerror, ontimeout }")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("请求方法，支持跨域请求")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("formatTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("timestamp")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("格式化时间戳为“yyyy-MM-dd HH:mm:ss”格式")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("formatDate")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("timestamp")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("格式化时间戳为“yyyy-MM-dd”")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("5")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("getQrCode")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("options")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("获取二维码")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("6")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("getCache")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("actionId")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("获取指定页面脚本的缓存，actionId也会自动注入")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("7")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("setCache")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("actionId, value")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("设置指定页面脚本的缓存")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("8")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("clearCache")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("actionId")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("清除指定页面脚本的缓存")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("9")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("showToast")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("options")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("显示toast")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("10")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("loadScript")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("url")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("加载js，返回promise")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("11")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("loadCss")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("url")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("加载css样式资源")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("12")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("loadStyle")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("styleContent")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("加载css样式")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("13")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("loadFrame")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("runtimeId, links")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("同时加载4个iframe页面，支持拖拽调整各个页面的大小，links数组的每项为[src, title]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("14")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("get")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("key")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("获取window指定key的value，若key不存在，则监听该key的绑定，可用于获取不确定赋值时机的全局变量")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("15")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("addButton")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("name, onClick")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("添加按钮")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("16")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("copy")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("text")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("复制文本")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("17")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("open")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("url")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("打开H5链接")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("18")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("sleep")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("ms")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("休息一定时间，单位（毫秒）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("19")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("console")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("输出日志，可以在页面禁用console后打印日志")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("20")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("setInputValue")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("value")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("设置输入框的值")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("21")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("keepScope")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("若页面脚本绑定的点击事件不生效，或异步逻辑不执行，可执行该方法保留作用域")])])])]),t._v(" "),e("p",[t._v("基于以上"),e("code",[t._v("orangeMind")]),t._v("对象提供的各种API，我们可以很容易实现打开链接、发送跨域请求、获取二维码、复制内容、设置输入值、添加按钮、设置和读取页面脚本缓存数据、加载各种资源等常见功能需求。")])])}),[],!1,null,null,null);e.default=n.exports}}]);